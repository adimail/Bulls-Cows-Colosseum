DirectoryIndex dist/index.html

RewriteEngine On

# Rule to proxy WebSocket connections to the Go backend
RewriteCond %{HTTP:Upgrade} =websocket [NC]
RewriteRule ^ws/?(.*)$ ws://127.0.0.1:8080/ws/$1 [P,L]

# Rule to proxy API requests to the Go backend
RewriteRule ^api/(.*)$ http://127.0.0.1:8080/api/$1 [P,L]

# --- Asset Routing ---
RewriteCond %{REQUEST_URI} !^/dist/
RewriteCond %{DOCUMENT_ROOT}/dist%{REQUEST_URI} -f
RewriteRule ^(.*)$ /dist/$1 [L]

# --- SPA Routing ---
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /dist/index.html [L]
